(function(n,t){typeof define=="function"&&define.amd?define(["exports"],t):typeof exports=="object"&&typeof exports.nodeName!="string"?t(exports):t(n.IBAN={})})(this,function(n){function o(n){return n=n.toUpperCase(),n=n.substr(4)+n.substr(0,4),n.split("").map(function(n){var t=n.charCodeAt(0);return t>=f&&t<=e?t-f+10:n}).join("")}function s(n){for(var t=n,i;t.length>2;)i=t.slice(0,9),t=parseInt(i,10)%97+t.slice(i.length);return parseInt(t,10)%97}function a(n){var t=n.match(/(.{3})/g).map(function(n){var t,i=n.slice(0,1),r=parseInt(n.slice(1),10);switch(i){case"A":t="0-9A-Za-z";break;case"B":t="0-9A-Z";break;case"C":t="A-Za-z";break;case"F":t="0-9";break;case"L":t="a-z";break;case"U":t="A-Z";break;case"W":t="0-9a-z"}return"(["+t+"]{"+r+"})"});return new RegExp("^"+t.join("")+"$")}function u(n){return n.replace(h,"").toUpperCase()}function t(n,t,i,r){this.countryCode=n;this.length=t;this.structure=i;this.example=r}function i(n){r[n.countryCode]=n}function l(n){return typeof n=="string"||n instanceof String}var f,e,r,h,c;Array.prototype.map||(Array.prototype.map=function(n){"use strict";var i,r,u,f,t;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),r=i.length>>>0,typeof n!="function")throw new TypeError;for(u=new Array(r),f=arguments.length>=2?arguments[1]:void 0,t=0;t<r;t++)t in i&&(u[t]=n.call(f,i[t],t,i));return u});f="A".charCodeAt(0);e="Z".charCodeAt(0);t.prototype._regex=function(){return this._cachedRegex||(this._cachedRegex=a(this.structure))};t.prototype.isValid=function(n){return this.length==n.length&&this.countryCode===n.slice(0,2)&&this._regex().test(n.slice(4))&&s(o(n))==1};t.prototype.toBBAN=function(n,t){return this._regex().exec(n.slice(4)).slice(1).join(t)};t.prototype.fromBBAN=function(n){if(!this.isValidBBAN(n))throw new Error("Invalid BBAN");var t=s(o(this.countryCode+"00"+n)),i=("0"+(98-t)).slice(-2);return this.countryCode+i+n};t.prototype.isValidBBAN=function(n){return this.length-4==n.length&&this._regex().test(n)};r={};i(new t("AD",24,"F04F04A12","AD1200012030200359100100"));i(new t("AE",23,"F03F16","AE070331234567890123456"));i(new t("AL",28,"F08A16","AL47212110090000000235698741"));i(new t("AT",20,"F05F11","AT611904300234573201"));i(new t("AZ",28,"U04A20","AZ21NABZ00000000137010001944"));i(new t("BA",20,"F03F03F08F02","BA391290079401028494"));i(new t("BE",16,"F03F07F02","BE68539007547034"));i(new t("BG",22,"U04F04F02A08","BG80BNBG96611020345678"));i(new t("BH",22,"U04A14","BH67BMAG00001299123456"));i(new t("BR",29,"F08F05F10U01A01","BR9700360305000010009795493P1"));i(new t("CH",21,"F05A12","CH9300762011623852957"));i(new t("CR",22,"F04F14","CR72012300000171549015"));i(new t("CY",28,"F03F05A16","CY17002001280000001200527600"));i(new t("CZ",24,"F04F06F10","CZ6508000000192000145399"));i(new t("DE",22,"F08F10","DE89370400440532013000"));i(new t("DK",18,"F04F09F01","DK5000400440116243"));i(new t("DO",28,"U04F20","DO28BAGR00000001212453611324"));i(new t("EE",20,"F02F02F11F01","EE382200221020145685"));i(new t("ES",24,"F04F04F01F01F10","ES9121000418450200051332"));i(new t("FI",18,"F06F07F01","FI2112345600000785"));i(new t("FO",18,"F04F09F01","FO6264600001631634"));i(new t("FR",27,"F05F05A11F02","FR1420041010050500013M02606"));i(new t("GB",22,"U04F06F08","GB29NWBK60161331926819"));i(new t("GE",22,"U02F16","GE29NB0000000101904917"));i(new t("GI",23,"U04A15","GI75NWBK000000007099453"));i(new t("GL",18,"F04F09F01","GL8964710001000206"));i(new t("GR",27,"F03F04A16","GR1601101250000000012300695"));i(new t("GT",28,"A04A20","GT82TRAJ01020000001210029690"));i(new t("HR",21,"F07F10","HR1210010051863000160"));i(new t("HU",28,"F03F04F01F15F01","HU42117730161111101800000000"));i(new t("IE",22,"U04F06F08","IE29AIBK93115212345678"));i(new t("IL",23,"F03F03F13","IL620108000000099999999"));i(new t("IS",26,"F04F02F06F10","IS140159260076545510730339"));i(new t("IT",27,"U01F05F05A12","IT60X0542811101000000123456"));i(new t("KW",30,"U04A22","KW81CBKU0000000000001234560101"));i(new t("KZ",20,"F03A13","KZ86125KZT5004100100"));i(new t("LB",28,"F04A20","LB62099900000001001901229114"));i(new t("LC",32,"U04F24","LC07HEMM000100010012001200013015"));i(new t("LI",21,"F05A12","LI21088100002324013AA"));i(new t("LT",20,"F05F11","LT121000011101001000"));i(new t("LU",20,"F03A13","LU280019400644750000"));i(new t("LV",21,"U04A13","LV80BANK0000435195001"));i(new t("MC",27,"F05F05A11F02","MC5811222000010123456789030"));i(new t("MD",24,"U02A18","MD24AG000225100013104168"));i(new t("ME",22,"F03F13F02","ME25505000012345678951"));i(new t("MK",19,"F03A10F02","MK07250120000058984"));i(new t("MR",27,"F05F05F11F02","MR1300020001010000123456753"));i(new t("MT",31,"U04F05A18","MT84MALT011000012345MTLCAST001S"));i(new t("MU",30,"U04F02F02F12F03U03","MU17BOMM0101101030300200000MUR"));i(new t("NL",18,"U04F10","NL91ABNA0417164300"));i(new t("NO",15,"F04F06F01","NO9386011117947"));i(new t("PK",24,"U04A16","PK36SCBL0000001123456702"));i(new t("PL",28,"F08F16","PL61109010140000071219812874"));i(new t("PS",29,"U04A21","PS92PALS000000000400123456702"));i(new t("PT",25,"F04F04F11F02","PT50000201231234567890154"));i(new t("RO",24,"U04A16","RO49AAAA1B31007593840000"));i(new t("RS",22,"F03F13F02","RS35260005601001611379"));i(new t("SA",24,"F02A18","SA0380000000608010167519"));i(new t("SE",24,"F03F16F01","SE4550000000058398257466"));i(new t("SI",19,"F05F08F02","SI56263300012039086"));i(new t("SK",24,"F04F06F10","SK3112000000198742637541"));i(new t("SM",27,"U01F05F05A12","SM86U0322509800000000270100"));i(new t("ST",25,"F08F11F02","ST68000100010051845310112"));i(new t("TL",23,"F03F14F02","TL380080012345678910157"));i(new t("TN",24,"F02F03F13F02","TN5910006035183598478831"));i(new t("TR",26,"F05F01A16","TR330006100519786457841326"));i(new t("VG",24,"U04F16","VG96VPVG0000012345678901"));i(new t("XK",20,"F04F10F02","XK051212012345678906"));i(new t("AO",25,"F21","AO69123456789012345678901"));i(new t("BF",27,"F23","BF2312345678901234567890123"));i(new t("BI",16,"F12","BI41123456789012"));i(new t("BJ",28,"F24","BJ39123456789012345678901234"));i(new t("CI",28,"U01F23","CI17A12345678901234567890123"));i(new t("CM",27,"F23","CM9012345678901234567890123"));i(new t("CV",25,"F21","CV30123456789012345678901"));i(new t("DZ",24,"F20","DZ8612345678901234567890"));i(new t("IR",26,"F22","IR861234568790123456789012"));i(new t("JO",30,"A04F22","JO15AAAA1234567890123456789012"));i(new t("MG",27,"F23","MG1812345678901234567890123"));i(new t("ML",28,"U01F23","ML15A12345678901234567890123"));i(new t("MZ",25,"F21","MZ25123456789012345678901"));i(new t("QA",29,"U04A21","QA30AAAA123456789012345678901"));i(new t("SN",28,"U01F23","SN52A12345678901234567890123"));i(new t("UA",29,"F25","UA511234567890123456789012345"));h=/[^a-zA-Z0-9]/g;c=/(.{4})(?!$)/g;n.isValid=function(n){if(!l(n))return!1;n=u(n);var t=r[n.slice(0,2)];return!!t&&t.isValid(n)};n.toBBAN=function(n,t){typeof t=="undefined"&&(t=" ");n=u(n);var i=r[n.slice(0,2)];if(!i)throw new Error("No country with code "+n.slice(0,2));return i.toBBAN(n,t)};n.fromBBAN=function(n,t){var i=r[n];if(!i)throw new Error("No country with code "+n);return i.fromBBAN(u(t))};n.isValidBBAN=function(n,t){if(!l(t))return!1;var i=r[n];return i&&i.isValidBBAN(u(t))};n.printFormat=function(n,t){return typeof t=="undefined"&&(t=" "),u(n).replace(c,"$1"+t)};n.electronicFormat=u;n.countries=r})