(function(n){n.fn.inlineStyle=function(t){var f=n.trim(this.attr("style")),e,r,i,u;if(f)for(r=f.split(";"),i=0;i<r.length;i++)u=r[i].split(":"),n.trim(u[0])===t&&(e=u[1]);return e};n.csslider=function(t,i){var u=n.extend({},{selector:".slides > li.item",move:1,speed:400,direction:"horizontal",textClassName:".product-name",delay:0,widthViewport:0,heightViewport:0,textPrev:"Prev",textNext:"Next",circular:0,parentHidden:""},i),r=n(t),o="click",f=u.direction==="vertical",e=u.delay>0,s;r.addClass("csslider");rtlStyle=n("div.page").first().css("direction")=="rtl";s=0;r.containerSelector=u.selector.substr(0,u.selector.search(" "));r.container=n(r.containerSelector,r);r.slides=n(u.selector,r);r.target=0;r.enoughtItem=!0;r.currentHideNav="prev";f?r.addClass("vertical"):r.addClass("horizontal");r.scrolling=!1;r.setup=function(){r.viewport=n('<div class="viewport"><\/div>');r.viewport.append(r.container);r.append(r.viewport);r.controlNav();u.widthViewport>0&&r.viewport.width(u.widthViewport);u.heightViewport>0&&r.viewport.height(u.heightViewport);r.init(!0);r.hammer=new Hammer(r.container[0],{swipe_time:200});r.touchHamer()};r.init=function(t){var v,h,a,t,l;u.parentHidden&&(r.curDisplay=r.parents(u.parentHidden).css("display"),r.curDisplay!="block"&&r.parents(u.parentHidden).css({visibility:"hidden",display:"block"}));r.interval&&e&&clearTimeout(r.interval);t||r.reset();var i=0,o=0,s=0,y=0,s=0,c=0;r.slides.each(function(t){n(this).inlineStyle("width")!=undefined&&n(this).attr("data-width",n.trim(n(this).inlineStyle("width")));n(this).inlineStyle("height")!=undefined&&n(this).attr("data-height",n.trim(n(this).inlineStyle("height")));i<n(this).width()&&(i=n(this).width(),o=n(this).outerWidth(!0),y=t);s<n(this).height()&&(s=n(this).height(),c=n(this).outerHeight(!0))});f?(r.viewport.width()<o&&(r.container.addClass("no-float"),h=r.viewport.width()-(o-i),a=h/i,i=h,r.slides.width(i),s=0,c=0,r.slides.each(function(){s<n(this).height()&&(s=n(this).height(),c=n(this).outerHeight(!0))})),r.lengthPx=r.viewport.height(),r.slides.height(s),t=r.slides.first(),r.stepLength=c*u.move,l=r.slides.length*c,r.container.height(l),r.container.lengthPx=l,r.container.lengthPx-r.lengthPx<=c-s?(r.enoughtItem=!1,r.next.hide(),r.prev.hide()):(r.enoughtItem=!0,r.next.show(),r.prev.show())):(r.lengthPx=r.viewport.width(),r.lengthPx<o&&(r.container.addClass("no-float"),h=r.viewport.width()-(o-i),r.lengthPx=r.viewport.width(),a=h/i,v=i-h,i=h,o=o-v,s=Math.ceil(s*a)),r.slides.width(i),t=r.slides.first(),r.stepLength=o*u.move,l=r.slides.length*o,r.container.width(l),r.container.lengthPx=l,r.container.lengthPx-r.lengthPx<=o-i?(r.enoughtItem=!1,r.next.hide(),r.prev.hide()):(r.enoughtItem=!0,r.next.show(),r.prev.show()));r.finalTarget=r.lengthPx-r.container.lengthPx;r.target=0;r.resetScroll();r.slide(r.target,u.speed);u.circular==0&&r.enoughtItem&&(r.prev.hide(),r.next.show(),r.currentHideNav="prev");u.parentHidden&&r.curDisplay!="block"&&r.parents(u.parentHidden).css({visibility:"",display:r.curDisplay})};r.reset=function(){r.container.css("height","");r.slides.css("height","");r.container.css("width","");r.slides.css("width","");n("a.product-image",r).css("float","");r.slides.attr("data-width")&&r.slides.css("width",r.slides.attr("data-width"));r.slides.attr("data-height")&&r.slides.css("height",r.slides.attr("data-height"));r.container.removeClass("no-float")};r.resetScroll=function(){r.scrolling=!1;e&&(r.interval=setTimeout(r.nextSlide,u.delay))};r.touchHamer=function(){function s(n){n=n||window.event;n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.returnValue=!1,n.cancelBubble=!0)}var n,i,h,o;typeof addEventListener=="function"&&t.addEventListener("touchmove",function(n){n.touches.length==1&&n.preventDefault()},!1);r.hammer.ondragstart=function(t){(r.interval&&e&&clearTimeout(r.interval),r.scrolling||f&&(t.direction=="left"||t.direction=="right")||!f&&(t.direction=="up"||t.direction=="down"))||(n=0,i=0,h=Number(new Date),o=0)};r.hammer.ondrag=function(t){if(r.interval&&e&&clearTimeout(r.interval),r.scrolling||f&&(t.direction=="left"||t.direction=="right")||!f&&(t.direction=="up"||t.direction=="down")||!r.enoughtItem){s(t);return}if(t.touches.length>1||t.scale&&t.scale!==1||r.scrolling||!r.enoughtItem){s(t);return}if(o=f?t.distanceY:t.distanceX,n=r.target+o,n>r.stepLength/2){i=1;return}if(r.container.lengthPx+n<r.lengthPx-r.stepLength/2){i=-1;return}f?r.container.animate({marginTop:n+"px"},0):r.container.animate({marginLeft:n+"px"},0)};r.hammer.ondragend=function(t){var h,e,c;if(r.scrolling||f&&(t.direction=="left"||t.direction=="right")||!f&&(t.direction=="up"||t.direction=="down")||!r.enoughtItem){s(t);return}h=r.target;i<0?r.target=r.finalTarget:i>0?r.target=0:(e=Math.floor(Math.abs(o)%r.stepLength),c=e<r.stepLength/2?t.direction=="left"||t.direction=="up"?e:e*-1:t.direction=="left"||t.direction=="up"?(r.stepLength-e)*-1:r.stepLength-e,r.target=n+c);u.circular==0&&h!=r.target&&(t.direction=="left"||t.direction=="up"?r.checkNextSlide():r.checkPrevSlide());r.slide(r.target,u.speed)};r.hammer.onswipe=function(n){if(r.scrolling||!r.enoughtItem){s(n);return}f?n.direction=="up"?r.nextSlide():n.direction=="down"&&r.prevSlide():n.direction=="left"?r.nextSlide():n.direction=="right"&&r.prevSlide()}};r.slide=function(n,t){r.interval&&e&&clearTimeout(r.interval);r.scrolling=!0;var i=n+"px";f?r.container.animate({marginTop:i},t,"swing",r.resetScroll):rtlStyle?r.container.animate({marginRight:i},t,"swing",r.resetScroll):r.container.animate({marginLeft:i},t,"swing",r.resetScroll)};r.checkNextSlide=function(){r.currentHideNav!="next"&&u.circular==0&&(r.currentHideNav=="prev"&&(r.prev.show(),r.currentHideNav=""),r.target<=r.finalTarget&&(r.currentHideNav="next",r.next.hide()))};r.checkPrevSlide=function(){r.currentHideNav!="prev"&&u.circular==0&&(r.currentHideNav=="next"&&(r.next.show(),r.currentHideNav=""),r.target+r.stepLength>r.stepLength/2&&(r.currentHideNav="prev",r.prev.hide()))};r.nextSlide=function(){!r.scrolling&&r.enoughtItem&&(r.interval&&e&&clearTimeout(r.interval),r.target-=r.stepLength,r.target-Math.abs(r.finalTarget)%r.stepLength<=r.finalTarget&&(r.target=u.circular>0?0:r.finalTarget),r.slide(r.target,u.speed),r.checkNextSlide())};r.prevSlide=function(){!r.scrolling&&r.enoughtItem&&(r.interval&&e&&clearTimeout(r.interval),r.target<=r.finalTarget?(r.target+=r.stepLength+Math.abs(r.finalTarget)%r.stepLength,r.target>=0&&(r.target=r.target>=r.stepLength&&u.circular>0?r.finalTarget:0)):(r.target+=r.stepLength,r.target>=0&&(r.target=r.target>=r.stepLength&&u.circular>0?r.finalTarget:0)),r.slide(r.target,u.speed),r.checkPrevSlide())};r.controlNav=function(){var t=n("<div class='controls'><a href='#' title='"+u.textPrev+"' class='prev'>"+u.textPrev+"<\/a><a title='"+u.textNext+"' href='#' class='next'>"+u.textNext+"<\/a><\/div>");r.append(t);r.next=n("a.next",r);r.prev=n("a.prev",r);r.next.bind(o,function(n){n.preventDefault();r.nextSlide()});r.prev.bind(o,function(n){n.preventDefault();r.prevSlide()})};r.showHideNav=function(){r.target<0?r.prev.show():r.prev.hide()};r.setup();n(window).bind("emadaptchange orientationchange",function(){setTimeout(function(){r.init(!1)},300)})};n.fn.csslider=function(t){return this.each(function(){new n.csslider(this,t)})}})(jQuery)